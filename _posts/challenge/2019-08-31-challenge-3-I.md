---
title: 挑战三：Picture Puzzle of Chino (I)
author: Ball-lightnings
permalink: /challenge/challenge-3-I
key: challenge-3-I
tags: yuzan1830
sidebar:
  nav: challenge
---

### 说在前面

公元2019年八月某日，我灵机一动，决定给达羌贵族送上~~温馨的问候~~等待两个月之久的挑战。其原型是某老年机上的~~脑残~~拼图游戏。然后我又想到了《点兔》中智乃的唯一乐趣拼图被天才烧酒kokoa一秒解决时的悔恨（大雾），决定献上这一道题。

~~结果达羌的解答出来得比我的题还快，原来在你说出“做题”的瞬间，你的行动就已经完成了！！~~

<!--more-->

### Question ver0.9

#### 自以为是的题干

有一个$3\times 3$的九宫格如图所示。现在用$1$~$8$八个数字随意填进九个格子中的任意八个，并使得有一个角上的格子空缺。如下图

     1  3  8
     2  4  7
     6  5 ( )

接着我们规定一种~~变幻~~[^shift]变换，即移动有空缺格的一行，使得在移动后，每一行中每个向空格方向平移，如下图

     1  3 ( )
     2  4  8
     6  5  7

或

     1  3  8
     2  4  7
    ( ) 6  5

我们可以看到，经过平移后可将图形变为两种情况，各行不变或各列不变，空出每行列角上另一个格子。求经过最少变化使得数字按照123457678的排列的变化次数。

> 达羌：你翻车了呀，如果这样移动的话，就相当于外面七个数字在转圈圈，中间的数字没动过，这就不好玩了。

我日，竟然没想到这茬。于是达羌给我下了命令，两天内想出新的点子。

### Question ver0.95

我改变移动方式。将“每次平移一行或一列”改为“每行移动某一格”，比如

     1  3  8
     2  4  7
     6  5 ( )
 
经过一次变换后，就为

     1  3  8
     2  4 ( )
     6  5  7

或

     1  3  8
     2  4  7
     6 ( ) 5

现在又如何呢，达羌一定很开心吧。

> 达羌：我就怕你想到这个，这个有原题。

然后学识渊博的达羌就给我发了一串神秘代码。[没想到我竟然命中北大原题……](http://poj.org/problem?id=1077)

没办法，于是我绞尽脑汁，再次想到一种更神奇的变换。

### Question ver0.98

我再改一下定义。不再用平移来定义，而是进行交换。把每一格与其对角线上的某格进行位置交换。比如

    #   #
      $
    #   #

在变换后，就变为

    $   #
      #
    #   #

或其他四种情况。位于边中心上的有两种变换可能，而位于角上的唯一变换与中心的变换相同。

现在总没问题了吧，我开心地想。

> 达羌：这样#位置的数就交换不到$的位置。

    $ # $ #
    # $ # $
    $ # $ #
    # $ # $

我再次陷入思考。我必须找到一种能使所有格子都能在有限步数内能抵达任意一格的变换方法。长达半分钟的思考后，我想到了，用两种变换定义：一种左右交换，一种对角线交换，两种变换方式交替进行。

> 我：这样每个数都能移动到所有位置（吗）。

> 达羌：还有一个问题，如果交替进行的话，第一次操作用哪一种？我就默认两种当中选一种。
>
> 我：可以（猝死状）。

于是，题目就这样~~偷税~~愉悦地决定下来了。

接下来就是润色后的题目了。

### Question ver1.0

在一座小镇里，有一家名为Rabbit House的咖啡店。店主的孙女名叫智乃，喜欢玩各种东西来消磨时光。这样温馨而平静的日常却很快被打破。在一位名叫心爱的高中生来到Rabbit House借宿后，智乃的平静生活结束了，奇妙冒险开始了。智乃喜欢玩拼图，在花大一段时间完成一件东西的成就感让她倍感满足。然而，当某一天晚上智乃回到房间时，发现她拼了一个月的拼图竟然已经被心爱拼好了。智乃感到了~~被NTR~~愤怒，于是她发明了一种全新的拼图，企图阻止心爱破坏她的美妙生活。

智乃拿出一个$n\times n$的格子，并且在里面放入了$n^2$个拼图片，不同于一般的拼图，这种拼图片没有锯齿与凹陷，四周与其他拼图平滑相接。然后她随意选取一块拼图，让这块拼图以下列两种方式之一进行移动。

1. 和与其相邻的某一拼图块交换位置。
2. 和与其对角的某一拼图块交换位置。

然后每次移动之后的下一次移动都与前一次不同，即两种移动交替进行。

智乃想通过尽量少的移动方式，让拼图恢复原状。

这个拼图成功地阻止了心爱的侵入，但是智乃自己也解不出来。

现在，作为咖啡店客人的你，需要完成这个问题，奖励是——抚摸提比一次。

**样例输入**

    1 2 9
    4 6 3
    7 8 5

**样例输出**

    Step #1: 3 9
    Step #2: 5 6
    Step #3: 6 9

[^shift]: 张YR语。
